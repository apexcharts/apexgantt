<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ApexGantt</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet" />
    <script src="../apexgantt.min.js"></script>
  </head>
  <body>
    <div id="svg-gantt" style="margin: 0 auto; width: 90%; height: 600px"></div>
    <script>
      const nestedData = [
        {
          project: {
            task: {
              id: 'T1',
              details: {
                title: 'Design Phase',
                dates: {
                  start: '01-01-2024',
                  end: '01-15-2024',
                },
              },
            },
            metadata: {
              completion_percentage: 0.75,
              category: 'design',
            },
            styling: {
              colors: {
                bar: '#4A90E2',
                row: '#F0F4F8',
              },
            },
          },
        },
        {
          project: {
            task: {
              id: 'T2',
              details: {
                title: 'Development Phase',
                dates: {
                  start: '01-16-2024',
                  end: '02-28-2024',
                },
              },
            },
            metadata: {
              completion_percentage: 0.45,
              category: 'task',
            },
            styling: {
              colors: {
                bar: '#50C878',
                row: '#F0F8F0',
              },
            },
          },
        },
      ];

      const ganttOptions = {
        enableTaskDrag: false,
        enableTaskResize: false,
        series: nestedData,
        parsing: {
          id: 'project.task.id',
          name: 'project.task.details.title',
          startTime: 'project.task.details.dates.start',
          endTime: 'project.task.details.dates.end',
          progress: {
            key: 'project.metadata.completion_percentage',
            transform: (value) => value * 100,
          },
          barBackgroundColor: 'project.styling.colors.bar',
          rowBackgroundColor: 'project.styling.colors.row',
        },
      };
      const chart = new ApexGantt(document.getElementById('svg-gantt'), ganttOptions);
      chart.render();
    </script>
  </body>
</html>
